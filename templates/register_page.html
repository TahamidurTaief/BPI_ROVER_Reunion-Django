{% extends 'base.html' %}
{% load static %}

{% block page_title %}রেজিস্ট্রেশন করুন - ব.প.ই রোভার স্কাউট গ্রুপ{% endblock page_title %}

{% block content %}
<style>
    /* CSS Variable Definitions */
    :root {
        --primary: #1e40af;
        --primary-rgb: 30, 64, 175;
        --secondary: #f59e0b;
        --success: #10b981;
        --error: #dc2626;
        --border-color: #e5e7eb;
        --bg: #ffffff;
        --title: #1f2937;
        --desc: #6b7280;
        --gradient-primary: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
    }
    
    [data-theme="dark"] {
        --border-color: #374151;
        --bg: #0f172a;
        --title: #f9fafb;
        --desc: #9ca3af;
    }
    
    /* Enhanced Hero Background - Simple */
    .register-hero-bg {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%);
        position: relative;
        overflow: hidden;
        min-height: 100vh;
    }
    
    [data-theme="dark"] .register-hero-bg {
        background: linear-gradient(135deg, rgba(5, 150, 105, 0.15) 0%, rgba(29, 78, 216, 0.15) 100%);
    }
    
    .register-hero-bg::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -20%;
        width: 600px;
        height: 600px;
        background: radial-gradient(circle, rgba(16, 185, 129, 0.2) 0%, transparent 70%);
        border-radius: 50%;
        animation: float-slow 20s ease-in-out infinite;
    }
    
    .register-hero-bg::after {
        content: '';
        position: absolute;
        bottom: -30%;
        left: -10%;
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%);
        border-radius: 50%;
        animation: float-slow 15s ease-in-out infinite reverse;
    }
    
    /* Floating Particles */
    .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(16, 185, 129, 0.4);
        border-radius: 50%;
        pointer-events: none;
        animation: float-particle linear infinite;
    }
    
    @keyframes float-slow {
        0%, 100% { transform: translate(0, 0) scale(1); }
        50% { transform: translate(30px, -30px) scale(1.1); }
    }
    
    @keyframes float-particle {
        0% {
            transform: translateY(100vh) translateX(0) scale(0);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% {
            transform: translateY(-100px) translateX(100px) scale(1);
            opacity: 0;
        }
    }
    
    /* Modern Registration Card - Simplified */
    .register-card {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(30px) saturate(150%);
        border: 2px solid rgba(16, 185, 129, 0.15);
        border-radius: 2rem;
        box-shadow: 
            0 25px 60px -15px rgba(0, 0, 0, 0.15),
            0 10px 30px -10px rgba(16, 185, 129, 0.1);
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }
    
    [data-theme="dark"] .register-card {
        background: rgba(15, 23, 42, 0.98);
        border-color: rgba(16, 185, 129, 0.25);
        box-shadow: 
            0 25px 60px -15px rgba(0, 0, 0, 0.6),
            0 10px 30px -10px rgba(16, 185, 129, 0.2);
    }
    
    .register-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6, #ec4899, #10b981);
        background-size: 300% 100%;
        animation: shimmer-gradient 4s linear infinite;
    }
    
    @keyframes shimmer-gradient {
        0% { background-position: 300% 0; }
        100% { background-position: -300% 0; }
    }
    
    .register-card:hover {
        transform: translateY(-4px);
        box-shadow: 
            0 35px 80px -15px rgba(0, 0, 0, 0.2),
            0 15px 40px -10px rgba(16, 185, 129, 0.15);
    }
    
    [data-theme="dark"] .register-card:hover {
        box-shadow: 
            0 35px 80px -15px rgba(0, 0, 0, 0.7),
            0 15px 40px -10px rgba(16, 185, 129, 0.3);
    }
    
    /* Info Cards - Simplified */
    .info-card {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(5, 150, 105, 0.06));
        border: 2px solid rgba(16, 185, 129, 0.25);
        border-radius: 1.5rem;
        padding: 1.5rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
    }
    
    [data-theme="dark"] .info-card {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.18), rgba(5, 150, 105, 0.12));
        border-color: rgba(16, 185, 129, 0.35);
    }
    
    .info-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px -5px rgba(16, 185, 129, 0.25);
    }
    
    .info-card:hover::after {
        opacity: 1;
    }
    
    .info-card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 
            0 20px 40px -12px rgba(16, 185, 129, 0.4),
            0 8px 16px -8px rgba(0, 0, 0, 0.2);
        border-color: rgba(16, 185, 129, 0.4);
    }
    
    [data-theme="dark"] .info-card:hover {
        box-shadow: 
            0 20px 40px -12px rgba(16, 185, 129, 0.5),
            0 8px 16px -8px rgba(0, 0, 0, 0.4);
    }
    
    .info-card-blue {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(29, 78, 216, 0.06));
        border-color: rgba(59, 130, 246, 0.25);
    }
    
    [data-theme="dark"] .info-card-blue {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.18), rgba(29, 78, 216, 0.12));
        border-color: rgba(59, 130, 246, 0.35);
    }
    
    .info-card-blue:hover {
        box-shadow: 
            0 20px 40px -12px rgba(59, 130, 246, 0.4),
            0 8px 16px -8px rgba(0, 0, 0, 0.2);
        border-color: rgba(59, 130, 246, 0.4);
    }
    
    .info-card-purple {
        background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(124, 58, 237, 0.06));
        border-color: rgba(139, 92, 246, 0.25);
    }
    
    [data-theme="dark"] .info-card-purple {
        background: linear-gradient(135deg, rgba(139, 92, 246, 0.18), rgba(124, 58, 237, 0.12));
        border-color: rgba(139, 92, 246, 0.35);
    }
    
    .info-card-purple:hover {
        box-shadow: 
            0 20px 40px -12px rgba(139, 92, 246, 0.4),
            0 8px 16px -8px rgba(0, 0, 0, 0.2);
        border-color: rgba(139, 92, 246, 0.4);
    }
    
    .info-card-orange {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.12), rgba(217, 119, 6, 0.06));
        border-color: rgba(245, 158, 11, 0.25);
    }
    
    [data-theme="dark"] .info-card-orange {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.18), rgba(217, 119, 6, 0.12));
        border-color: rgba(245, 158, 11, 0.35);
    }
    
    .info-card-orange:hover {
        box-shadow: 
            0 20px 40px -12px rgba(245, 158, 11, 0.4),
            0 8px 16px -8px rgba(0, 0, 0, 0.2);
        border-color: rgba(245, 158, 11, 0.4);
    }
    
    /* Icon Wrapper - Simplified */
    .register-icon-wrapper {
        width: 64px;
        height: 64px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: visible;
    }
    
    .register-icon-wrapper::before {
        content: '';
        position: absolute;
        inset: -4px;
        background: inherit;
        opacity: 0.4;
        filter: blur(15px);
        transform: scale(0.85);
        border-radius: inherit;
        z-index: -1;
        transition: all 0.3s ease;
    }
    
    .info-card:hover .register-icon-wrapper {
        transform: rotate(10deg) scale(1.1);
    }
    
    .info-card:hover .register-icon-wrapper::before {
        opacity: 0.6;
        filter: blur(20px);
        transform: scale(1);
    }
    
    .icon-green {
        background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .icon-blue {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    }
    
    .icon-purple {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    }
    
    .icon-orange {
        background: linear-gradient(135deg, #f59e0b, #d97706);
    }
    
    /* Enhanced Badge with Shimmer */
    .register-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1.5rem;
        border-radius: 9999px;
        font-weight: 700;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        background: linear-gradient(135deg, #10b981, #059669, #10b981);
        background-size: 200% 100%;
        color: white;
        box-shadow: 
            0 4px 15px rgba(16, 185, 129, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
        animation: pulse-glow 2s ease-in-out infinite, shimmer-badge 3s linear infinite;
        position: relative;
        overflow: hidden;
    }
    
    .register-badge::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        animation: badge-shine 3s linear infinite;
    }
    
    @keyframes pulse-glow {
        0%, 100% {
            box-shadow: 
                0 4px 15px rgba(16, 185, 129, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            transform: scale(1);
        }
        50% {
            box-shadow: 
                0 6px 25px rgba(16, 185, 129, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            transform: scale(1.02);
        }
    }
    
    @keyframes shimmer-badge {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
    
    @keyframes badge-shine {
        0% { left: -100%; }
        100% { left: 200%; }
    }
    
    /* Enhanced Loading Spinner */
    .loading-spinner {
        width: 70px;
        height: 70px;
        border: 5px solid rgba(16, 185, 129, 0.2);
        border-top-color: #10b981;
        border-right-color: #3b82f6;
        border-radius: 50%;
        animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
        position: relative;
    }
    
    .loading-spinner::after {
        content: '';
        position: absolute;
        inset: 10px;
        border: 3px solid rgba(16, 185, 129, 0.15);
        border-top-color: #059669;
        border-radius: 50%;
        animation: spin 0.7s linear infinite reverse;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    /* Scroll Progress Bar */
    .scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6);
        transform-origin: left;
        transform: scaleX(0);
        z-index: 9999;
        transition: transform 0.1s ease-out;
    }
    
    /* Modern Form Styles - Simple & Attractive */
    .form-group {
        margin-bottom: 1.25rem;
    }
    
    .form-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
        font-size: 0.925rem;
        color: var(--title);
        transition: color 0.2s ease;
    }
    
    .form-label i {
        color: var(--primary);
    }
    
    .form-input,
    .form-select,
    .form-textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 0.75rem;
        background: var(--bg);
        color: var(--title);
        font-size: 0.95rem;
        transition: all 0.2s ease;
        outline: none;
    }
    
    [data-theme="dark"] .form-input,
    [data-theme="dark"] .form-select,
    [data-theme="dark"] .form-textarea {
        background: rgba(15, 23, 42, 0.5);
        border-color: rgba(96, 165, 250, 0.2);
    }
    
    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);
    }
    
    .form-input::placeholder,
    .form-textarea::placeholder {
        color: var(--desc);
        opacity: 0.5;
    }
    
    .form-input.error,
    .form-select.error,
    .form-textarea.error {
        border-color: var(--error);
    }
    
    .form-error {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        margin-top: 0.375rem;
        font-size: 0.8125rem;
        color: var(--error);
    }
    
    .form-select {
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%231e40af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.25rem;
        padding-right: 2.5rem;
    }
    
    [data-theme="dark"] .form-select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2360a5fa'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    }
    
    .form-textarea {
        resize: vertical;
        min-height: 80px;
    }
    
    /* Form Button */
    .form-btn-primary {
        background: var(--gradient-primary);
        color: white;
        padding: 0.875rem 2rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 1rem;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.3);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .form-btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(var(--primary-rgb), 0.4);
    }
    
    .form-btn-primary:active {
        transform: translateY(0);
    }
    
    /* Enhanced Responsive Design */
    @media (max-width: 768px) {
        .register-hero-bg::before,
        .register-hero-bg::after {
            width: 300px;
            height: 300px;
        }
        
        .register-icon-wrapper {
            width: 52px;
            height: 52px;
            font-size: 1.4rem;
        }
        
        .register-card {
            border-radius: 1.5rem;
        }
        
        .info-card {
            border-radius: 1.25rem;
            padding: 1.25rem;
        }
    }
    
    @media (max-width: 640px) {
        .register-badge {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border-width: 4px;
        }
        
        .loading-spinner::after {
            border-width: 2px;
            inset: 8px;
        }
    }
    
    /* Print Styles */
    @media print {
        .register-hero-bg::before,
        .register-hero-bg::after,
        .particle {
            display: none;
        }
        
        .register-card,
        .info-card {
            box-shadow: none;
            border: 1px solid #e5e7eb;
        }
    }
</style>

<!-- Scroll Progress Bar -->
<div class="scroll-progress" id="scrollProgress"></div>

<!-- Hero Section -->
<div class="register-hero-bg pb-12 pt-8 md:pt-12 md:pb-20">
    <!-- Floating Particles -->
    <div class="particles-container" id="particlesContainer"></div>
    
    <div class="container mx-auto px-4 relative z-10">
        <div class="flex w-full justify-center mb-8 md:mb-12">
            <img src="{% static 'img/group_photo1.jpg' %}" alt="Group Photo" class="w-full object-cover rounded-xl border-4 border-white shadow-lg max-h-64 md:max-h-96" data-aos="zoom-in">
        </div>
        <!-- Page Header -->
        <div class="text-center mb-12 md:mb-16" data-aos="fade-down">

            <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 sans" style="color: var(--title);">
                <i data-lucide="clipboard-check" class="inline-block w-10 h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 mb-2"></i>
                রেজিস্ট্রেশন করুন
            </h1>
            <p class="text-lg md:text-xl max-w-2xl mx-auto serif" style="color: var(--desc);">
                আপনার আসনটি এখনই নিশ্চিত করুন এবং এই অবিস্মরণীয় পুনর্মিলনের অংশ হন!
            </p>
        </div>


        <!-- Registration Form Card -->
        <div class="max-w-4xl mx-auto">
            <div class="register-card p-6 md:p-8 lg:p-10" data-aos="zoom-in" data-aos-delay="500">
                <div 
                    id="registration-form-container"
                    hx-get="{% url 'htmx_get_step1_form' %}"
                    hx-trigger="load"
                    hx-swap="innerHTML"
                >
                    <!-- Loading State -->
                    <div class="text-center py-16">
                        <div class="loading-spinner mx-auto mb-6"></div>
                        <h3 class="text-2xl font-bold mb-2 sans" style="color: var(--title);">
                            ফর্ম লোড হচ্ছে...
                        </h3>
                        <p class="text-lg serif" style="color: var(--desc);">
                            অনুগ্রহ করে অপেক্ষা করুন, আপনার রেজিস্ট্রেশন ফর্ম প্রস্তুত করা হচ্ছে।
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Info Section -->
        <div class="mt-12 max-w-4xl mx-auto" data-aos="fade-up" data-aos-delay="600">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
                <!-- Security Badge -->
                <div class="text-center p-6 rounded-2xl" style="background: rgba(var(--success), 0.05); border: 2px solid rgba(var(--success), 0.2);">
                    <i data-lucide="shield-check" class="w-12 h-12 mx-auto mb-3" style="color: var(--success);"></i>
                    <h3 class="font-bold text-base mb-1 sans" style="color: var(--title);">সুরক্ষিত পেমেন্ট</h3>
                    <p class="text-sm serif" style="color: var(--desc);">আপনার তথ্য সম্পূর্ণ নিরাপদ</p>
                </div>

                <!-- Quick Badge -->
                <div class="text-center p-6 rounded-2xl" style="background: rgba(var(--info), 0.05); border: 2px solid rgba(var(--info), 0.2);">
                    <i data-lucide="zap" class="w-12 h-12 mx-auto mb-3" style="color: var(--info);"></i>
                    <h3 class="font-bold text-base mb-1 sans" style="color: var(--title);">দ্রুত প্রক্রিয়া</h3>
                    <p class="text-sm serif" style="color: var(--desc);">মাত্র ২ মিনিটে সম্পন্ন</p>
                </div>

                <!-- Support Badge -->
                <div class="text-center p-6 rounded-2xl" style="background: rgba(var(--primary), 0.05); border: 2px solid rgba(var(--primary), 0.2);">
                    <i data-lucide="headphones" class="w-12 h-12 mx-auto mb-3" style="color: var(--primary);"></i>
                    <h3 class="font-bold text-base mb-1 sans" style="color: var(--title);">২৪/৭ সহায়তা</h3>
                    <p class="text-sm serif" style="color: var(--desc);">যেকোনো সময় যোগাযোগ করুন</p>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // Scroll Progress Bar
    window.addEventListener('scroll', () => {
        const scrollProgress = document.getElementById('scrollProgress');
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const progress = (scrollTop / scrollHeight);
        
        if (scrollProgress) {
            scrollProgress.style.transform = `scaleX(${progress})`;
        }
    });
    
    // Create Floating Particles
    function createParticles() {
        const container = document.getElementById('particlesContainer');
        if (!container) return;
        
        const colors = ['rgba(16, 185, 129, 0.4)', 'rgba(59, 130, 246, 0.4)', 'rgba(139, 92, 246, 0.4)'];
        const particleCount = window.innerWidth > 768 ? 30 : 15;
        
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
            particle.style.animationDelay = (Math.random() * 5) + 's';
            particle.style.width = particle.style.height = (Math.random() * 4 + 2) + 'px';
            container.appendChild(particle);
        }
    }
    
    // Smooth Scroll to Form
    document.addEventListener('DOMContentLoaded', () => {
        createParticles();
        
        // Reinitialize Lucide icons after HTMX swaps
        document.body.addEventListener('htmx:afterSwap', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
        
        // Add loading state feedback
        document.body.addEventListener('htmx:beforeRequest', (event) => {
            const target = event.detail.target;
            if (target) {
                target.style.opacity = '0.6';
                target.style.pointerEvents = 'none';
            }
        });
        
        document.body.addEventListener('htmx:afterRequest', (event) => {
            const target = event.detail.target;
            if (target) {
                target.style.opacity = '1';
                target.style.pointerEvents = 'auto';
            }
        });
    });
    
    // Intersection Observer for fade-in animations
    if ('IntersectionObserver' in window) {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);
        
        // Observe elements with data-aos attribute
        setTimeout(() => {
            document.querySelectorAll('[data-aos]').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(el);
            });
        }, 100);
    }
</script>
{% endblock %}